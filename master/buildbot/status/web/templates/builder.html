{% if not rt_update.rt_update  %}
{% from 'build_line.html' import build_table %}
{% import 'forms.html' as forms %}
{% import 'submenu.html' as submenu %}
{% extends "layout.html" %}

{% set bodyId = 'id="builderdetail_page"' %}

{% block submenu %}
  {{submenu.buildsubmenu(active_page=friendly_name, pathNum=4, builderName=friendly_name, buildersPath=path_to_builders, codebasesPath=path_to_codebases, buildNumber='', stepName='',selectedProject=selectedproject)}}
{% endblock %}

{% block content %}

<div id="brancOverViewCont" class="branch-overview top">
    
</div>
<div class="column-1">

  <div class="span-5 column">

    <h2 class="head-2">
      Current builds
    </h2>
  
    <table id="rtCurrentBuildsTable" class="table-1 tablesorter-js tablesorter first-child"> 
      <thead>
        <tr>
          <th class="txt-align-left">Build #</th>
          <th class="txt-align-left">Current build</th>          
          <th class="txt-align-left">Revision</th>    
          <th class="txt-align-left">Author</th>          
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="txt-align-left">
            <a href="http://katana.hq.unity3d.com/projects/Unity - Trunk/builders/proj0-Build%20LinuxStandaloneSupport%20-%20ABV%20Subset/builds/2610">
              #2610
            </a>
          </td>
          <td class="txt-align-left">
            <a href="http://katana.hq.unity3d.com/projects/Unity%20-%20Trunk/builders/proj0-Build%20LinuxStandaloneSupport%20-%20ABV%20Subset">
            Build LinuxStandaloneSupport - ABV Subset [ABV]
          </a> 
            <span class="spin-icon animate-spin pull-bottom" style="background-position: -26px 0px;"></span>  
          <div class="percent-outer-js percent-outer" data-etatime="883.5507881641388" data-starttime="1398772218.129108" data-timeelem="true">
              <span class="time-txt-js time-txt">ETA: 14 minutes, 41 seconds</span>
              <div class="percent-inner-js percent-inner" style="width: 48.9304%;">
                <div class="progressbar-overlay"></div>                 
              </div>
          </div>
          </td>
          <td class="txt-align-left">
              <a href="http://katana.hq.unity3d.com/projects/Unity%20-%20Trunk/builders/proj0-Build%20LinuxStandaloneSupport%20-%20ABV%20Subset">
                gfx-tests-data
              </a> 
              /
              <a href="http://katana.hq.unity3d.com/projects/Unity%20-%20Trunk/builders/proj0-Build%20LinuxStandaloneSupport%20-%20ABV%20Subset">
                trunk 
              </a> 
              /
              <a href="http://katana.hq.unity3d.com/projects/Unity%20-%20Trunk/builders/proj0-Build%20LinuxStandaloneSupport%20-%20ABV%20Subset">
                6671431218024...
              </a> 
          </td>
          <td class="txt-align-left">
            Simon Holm Nielsen
          </td>
        </tr>
         <tr>
          <td class="txt-align-left">
            <a href="http://katana.hq.unity3d.com/projects/Unity - Trunk/builders/proj0-Build%20LinuxStandaloneSupport%20-%20ABV%20Subset/builds/2610">
              #2610
            </a>
          </td>
          <td class="txt-align-left">
            <a href="http://katana.hq.unity3d.com/projects/Unity%20-%20Trunk/builders/proj0-Build%20LinuxStandaloneSupport%20-%20ABV%20Subset">
              Build LinuxStandaloneSupport - ABV Subset [ABV]
            </a> 
            <span class="spin-icon animate-spin pull-bottom" style="background-position: -26px 0px;"></span>  
          <div class="percent-outer-js percent-outer" data-etatime="883.5507881641388" data-starttime="1398772218.129108" data-timeelem="true">
              <span class="time-txt-js time-txt">ETA: 14 minutes, 41 seconds</span>
              <div class="percent-inner-js percent-inner" style="width: 48.9304%;">
                <div class="progressbar-overlay"></div>                 
              </div>
          </div>
          </td>
          <td class="txt-align-left">
               <a href="http://katana.hq.unity3d.com/projects/Unity%20-%20Trunk/builders/proj0-Build%20LinuxStandaloneSupport%20-%20ABV%20Subset">
                unity 
              </a> 
              /
              <a href="http://katana.hq.unity3d.com/projects/Unity%20-%20Trunk/builders/proj0-Build%20LinuxStandaloneSupport%20-%20ABV%20Subset">
                build/4.5-trunk  
              </a> 
              /
              <a href="http://katana.hq.unity3d.com/projects/Unity%20-%20Trunk/builders/proj0-Build%20LinuxStandaloneSupport%20-%20ABV%20Subset">
                6671431218024...
              </a> 
              <br>
              <br>
                <a href="http://katana.hq.unity3d.com/projects/Unity%20-%20Trunk/builders/proj0-Build%20LinuxStandaloneSupport%20-%20ABV%20Subset">
                gfx-tests-data
              </a> 
              /
              <a href="http://katana.hq.unity3d.com/projects/Unity%20-%20Trunk/builders/proj0-Build%20LinuxStandaloneSupport%20-%20ABV%20Subset">
                trunk 
              </a> 
              /
              <a href="http://katana.hq.unity3d.com/projects/Unity%20-%20Trunk/builders/proj0-Build%20LinuxStandaloneSupport%20-%20ABV%20Subset">
                6671431218024...
              </a> 
              <br>
              <br>
                <a href="http://katana.hq.unity3d.com/projects/Unity%20-%20Trunk/builders/proj0-Build%20LinuxStandaloneSupport%20-%20ABV%20Subset">
                gfx-tests-data
              </a> 
              /
              <a href="http://katana.hq.unity3d.com/projects/Unity%20-%20Trunk/builders/proj0-Build%20LinuxStandaloneSupport%20-%20ABV%20Subset">
                trunk 
              </a> 
              /
              <a href="http://katana.hq.unity3d.com/projects/Unity%20-%20Trunk/builders/proj0-Build%20LinuxStandaloneSupport%20-%20ABV%20Subset">
                6671431218024...
              </a> 
          </td>
          <td class="txt-align-left">
            Simon Holm Nielsen
          </td>
        </tr>
         <tr>
          <td class="txt-align-left">
            <a href="http://katana.hq.unity3d.com/projects/Unity - Trunk/builders/proj0-Build%20LinuxStandaloneSupport%20-%20ABV%20Subset/builds/2610">
              #2610
            </a>
          </td>
          <td class="txt-align-left">
            <a href="http://katana.hq.unity3d.com/projects/Unity%20-%20Trunk/builders/proj0-Build%20LinuxStandaloneSupport%20-%20ABV%20Subset">
            Build LinuxStandaloneSupport - ABV Subset [ABV]
          </a> 
            <span class="spin-icon animate-spin pull-bottom" style="background-position: -26px 0px;"></span>  
          <div class="percent-outer-js percent-outer" data-etatime="883.5507881641388" data-starttime="1398772218.129108" data-timeelem="true">
              <span class="time-txt-js time-txt">ETA: 14 minutes, 41 seconds</span>
              <div class="percent-inner-js percent-inner" style="width: 48.9304%;">
                <div class="progressbar-overlay"></div>                 
              </div>
          </div>
          </td>
          <td class="txt-align-left">
              <a href="http://katana.hq.unity3d.com/projects/Unity%20-%20Trunk/builders/proj0-Build%20LinuxStandaloneSupport%20-%20ABV%20Subset">
                unity 
              </a> 
              /
              <a href="http://katana.hq.unity3d.com/projects/Unity%20-%20Trunk/builders/proj0-Build%20LinuxStandaloneSupport%20-%20ABV%20Subset">
                build/4.5-trunk  
              </a> 
              /
              <a href="http://katana.hq.unity3d.com/projects/Unity%20-%20Trunk/builders/proj0-Build%20LinuxStandaloneSupport%20-%20ABV%20Subset">
                6671431218024...
              </a> 
              <br>
              <br>
                <a href="http://katana.hq.unity3d.com/projects/Unity%20-%20Trunk/builders/proj0-Build%20LinuxStandaloneSupport%20-%20ABV%20Subset">
                gfx-tests-data
              </a> 
              /
              <a href="http://katana.hq.unity3d.com/projects/Unity%20-%20Trunk/builders/proj0-Build%20LinuxStandaloneSupport%20-%20ABV%20Subset">
                trunk 
              </a> 
              /
              <a href="http://katana.hq.unity3d.com/projects/Unity%20-%20Trunk/builders/proj0-Build%20LinuxStandaloneSupport%20-%20ABV%20Subset">
                6671431218024...
              </a> 
              <br>
              <br>
                <a href="http://katana.hq.unity3d.com/projects/Unity%20-%20Trunk/builders/proj0-Build%20LinuxStandaloneSupport%20-%20ABV%20Subset">
                gfx-tests-data
              </a> 
              /
              <a href="http://katana.hq.unity3d.com/projects/Unity%20-%20Trunk/builders/proj0-Build%20LinuxStandaloneSupport%20-%20ABV%20Subset">
                trunk 
              </a> 
              /
              <a href="http://katana.hq.unity3d.com/projects/Unity%20-%20Trunk/builders/proj0-Build%20LinuxStandaloneSupport%20-%20ABV%20Subset">
                6671431218024...
              </a> 
          </td>
          <td class="txt-align-left">
            Simon Holm Nielsen
          </td>
        </tr>
      </tbody>
    </table>

    <h2 class="head-2" style="margin-top:20px;">
      Pending builds requests
    </h2>
    
    <table class="table-1 tablesorter-js tablesorter first-child"> 
      <thead>
        <tr>
          <th class="txt-align-left">Requested at</th>
          <th class="txt-align-left">Waiting</th>                    
          <th class="select-input no-tablesorter-js">
              <label for="selectall"> 
                Select all 
              </label>
              <input id="selectall" type="checkbox" name="checkuncheck">
          </th>          
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="txt-align-left">
            Apr 29 15:34:22
          </td>
          <td class="txt-align-left">
            waiting 12 mins, 50 secs 
          </td>
          <td class="select-input">
            <input type="checkbox" value="217517" name="cancelselected" class="fi-js fi">
            <br>
            <a href="#" class="force-individual-js delete-icon" title="Cancel this build"></a>
          </td>
        </tr>        
      </tbody>
    </table>

    <h2 class="head-2" style="margin-top:20px;">
      Build slaves
    </h2>
    
    <table class="table-1 tablesorter-js tablesorter first-child"> 
      <thead>
      {% if slaves %}
        <tr>
          <th class="txt-align-left">Name</th>
          <th>Status</th>          
        </tr>
      {% endif %}
      </thead>
      <tbody>
      {% for s in slaves %}
      <tr>
        <td class="txt-align-left">
          <b>
            <a href="{{ s.link|e }}">
              {{ s.friendly_name|e }}
            </a>
          </b>
        </td>
        {% if s.connected %}
          <td class="idle">connected</td>
        {% else %}
          <td class="offline">offline</td>        
        {% endif %}
        
      {% else %}
        <td>
          no slaves attached</td>
        </tr>
      {% endfor %}
      </tbody>
    </table>

  </div>
  <div class="column span-5">
    <ul class="btn-list fl-right">
      <!--
        <li>
           <a href="#" title="Build slaves" data-popuptitle="Build slaves" data-rt_update="buildslaves" class="ajaxbtn more-info">
              Build slaves
           </a>
        </li>
      -->
      <li>
        {% if authz.advertiseAction('forceBuild', request) and force_schedulers != {} %}
          <a href="#" title="Run Custom Build" data-contenttype="form" data-popuptitle="Run Custom Build" data-rt_update="extforms" data-b_name="{{ builder_name }}" data-b="{{ builder_url }}" class="ajaxbtn more-info">Run build
          </a>
        {% endif %}          
      </li>
    </ul>
    <h2 class="head-2">
      Recent Builds
    </h2>

    {{ build_table(recent) }}

    <!--
    {% if authz.advertiseAction('pingBuilder', request) %}
      <h2>Ping slaves</h2>
      {{ forms.ping_builder(builder_url+"/ping", authz) }}
    {% endif %}
    -->

  </div>

   

  </div>


  
 

{% endblock %}
    {% elif rt_update.rt_update[0] == 'buildslaves' %}
    <table class="table-1 tablesorter-js tablesorter first-child">
              <thead>
              {% if slaves %}
                <tr>
                  <th class="txt-align-left">Name</th>
                  <th>Status</th>
                  <th>Admin</th>
                </tr>
              {% endif %}
              </thead>
              <tbody>
              {% for s in slaves %}
              <tr>
                <td class="txt-align-left">
                  <b>
                    <a href="{{ s.link|e }}">
                      {{ s.name|e }}
                    </a>
                  </b>
                </td>
                {% if s.connected %}
                  <td class="idle">connected</td>
                  <td>{{ s.admin|email if s.admin else ""}}</td>
                {% else %}
                  <td class="offline">offline</td>
                  <td>&nbsp;</td>
                {% endif %}
                
              {% else %}
                <td>no slaves attached</td>
                </tr>
              {% endfor %}
              </tbody>
            </table>

{% endif %}
