{% macro change(c) %}

<table class="table-1 var-1">
  {% set row_class=cycler('alt','') %}
   
  <tr class="{{ row_class.next() }}">
  
    {% if c.category %}
      <th class="left">Category</th>
    {% endif %}
    <th class="left">Changed by</th>
    <th class="left">
      Time & date
    </th>
    
  {% if c.repository %}
  
    <th class="left">Repository</th>
  
  {% endif %} {% if c.project %}
  
    <th class="left">Project</th>
    
  {% endif %} {% if c.branch %}

    <th class="left">Branch</th>
    
  {% endif %} {% if c.rev %}
  
    <th class="left">Revision</th>
    
  {% endif %}
  {% if c.comments %}
    <th>Comments</th>
  {% endif %}
  
  <th>Changed files</th>

  </tr>
    
  <tr class="{{ row_class.next() }}">
    
    {% if c.category %}
      <td>{{ c.category }}</td>
    {% endif %}
    <td>{{ c.who|email }}</td>
    <td>{{ c.at }}</td>
  
    {% if c.repository %}
  
    <td>
      <div class="ellipsis ellipsis-js">
        {{ c.repository|repolink }}
      </div>
    </td>
  
  {% endif %} {% if c.project %}
  
    <td>{{ c.project|projectlink }}</td>
  
  {% endif %} {% if c.branch %}
  
    <td>{{ c.branch|e }}</td>
  {% endif %} {% if c.rev %}
    <td>{%- if c.revlink -%}<a href="{{ c.revlink }}">#{{ c.rev|e }}</a>
    {%- else -%}{{ c.rev|revlink(c.repository) }} {%- endif -%}</td>
  
  {% endif %}
  
  {% if c.comments %}
    <td>
      <div class="ellipsis ellipsis-js">
        {{ c.comments|changecomment(c.project) }}
      </div>
    </td>
  {% endif %}
  
  <td>
    <ul>
      {% for f in c.files -%}
      <li class="{{ loop.cycle('alt', '') }}">{%- if f.url %}<a
        href="{{ f.url }}"><b>{{ f.name|e }}</b></a></li>
      {%- else %}
      <b>{{ f.name|e }}</b>
      {%- endif -%}
      </li>
      {% else %}
      <li>no files</li>
      {% endfor %}
    </ul>
  </td>

  </tr>  
</table>



{% if c.properties %}
<h3>Properties</h3>
<table class="info">
  {% for p in c.properties %}
  <tr class="{{ loop.cycle('alt') }}">
    <td class="left">{{ p[0]|capitalize|e }}</td>
    <td>{{ p[1]|e }}</td>
  </tr>
  {% endfor %}
</table>
{% endif %} 
{%- endmacro %} 

{% macro box_contents(who, url, pageTitle) -%}
<a href="{{ url }}" title="{{ pageTitle|e }}">{{ who|user }}</a>
{%- endmacro %}
