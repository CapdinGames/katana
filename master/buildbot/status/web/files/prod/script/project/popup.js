define(["jquery","helpers"],function(e,t){var n;return n={init:function(){function n(){var t=e(".form-open"),n=":button, :hidden, :checkbox, :submit";e(".grey-btn",t).click(function(r){var i=e("input",t).not(n),s=i.filter(function(){return this.name.indexOf("revision")>=0}),o=s.filter(function(){return this.value===""});o.length>0&&o.length<s.length&&(s.each(function(){e(this).val()===""?e(this).addClass("not-valid"):e(this).removeClass("not-valid")}),e(".form-message",t).hide(),e(".error-input",t).length||e(t).prepend('<div class="error-input">Fill out the empty revision fields or clear all before submitting</div>'),r.preventDefault())})}function r(t){if(t=="isForm")var n=e('<div class="more-info-box remove-js"><span class="close-btn"></span><h3>Run custom build</h3><div id="content1"></div></div>');else var n=e('<div class="more-info-box remove-js"><span class="close-btn"></span><h3>Buildslaves</h3><div id="content1"></div></div>');return n}function i(){e(".tabs-list li").click(function(t){var n=e(this).index();e(this).parent().find("li").removeClass("selected"),e(this).addClass("selected"),e(".content-blocks > div").each(function(t){e(this).index()!=n?e(this).hide():e(this).show()})})}jQuery.fn.center=function(){var t=e(window).height(),n=e(window).width(),r=this.outerHeight(),i=this.outerWidth();return this.css("position","absolute"),t<r?this.css("top",(t-r+(r-t)+10)/2+e(window).scrollTop()+"px"):this.css("top",(t-r)/2+e(window).scrollTop()+"px"),this.css("left",(n-i)/2+e(window).scrollLeft()+"px"),this},e(".popup-btn-js-2").click(function(t){t.preventDefault();var n=e(this).next(".more-info-box-js").clone();e(n).appendTo("body").center().fadeIn("fast",function(){e(document,".close-btn").bind("click touchstart",function(t){(!e(t.target).closest(".more-info-box-js").length||e(t.target).closest(".close-btn").length)&&e(n).remove()})}),e(window).resize(function(){e(n).center()})}),e(".popup-btn-js").each(function(t){e(this).attr("data-in",t)}),e(".popup-btn-js").click(function(t){t.preventDefault();var n=e(this).attr("data-in"),r='<div id="bowlG"><div id="bowl_ringG"><div class="ball_holderG"><div class="ballG"></div></div></div></div>',i=e(this).attr("data-rt_update");e("body").append(r).show(),e.ajax({url:"",cache:!1,dataType:"html",data:{rt_update:"pending"},success:function(t){e("#bowlG").remove();var r=document.createElement("html");r.innerHTML=t;var i=e(".more-info-box-js",r),s;e(i).each(function(t){t==n&&(s=e(this))}),e(s).appendTo("body").center().fadeIn("fast"),e(window).resize(function(){e(s).center()}),e(document,".close-btn").bind("click touchstart",function(t){(!e(t.target).closest(".more-info-box-js").length||e(t.target).closest(".close-btn").length)&&e(s).remove()})}})}),e("#getBtn").click(function(){e(".more-info-box-js").hide(),e("#content").empty();var t=e("#pathToCodeBases").attr("href"),n='<div id="bowlG"><div id="bowl_ringG"><div class="ball_holderG"><div class="ballG"></div></div></div></div>';e("body").append(n).show();var r=e('<div class="more-info-box more-info-box-js"><span class="close-btn"></span><h3>Codebases</h3><div id="content"></div></div>');e(r).appendTo("body"),e.get(t).done(function(t){e("#bowlG").remove();var n=e(t).find("#formWrapper");e(n).appendTo(e("#content")),e("#content .blue-btn").val("update"),e("#content .filter-table-input label, #content .filter-table-input .help-txt").remove(),e(r).center().fadeIn("fast"),e(window).resize(function(){e(r).center()}),require(["selectors"],function(t){t.comboBox("#formWrapper .select-tools-js"),t.init(),e(window).resize(function(){e(".more-info-box-js").center()})}),e("#getForm").attr("action",window.location.href),e('#getForm .blue-btn[type="submit"]').click(function(){e(".more-info-box-js").hide()}),e(document,".close-btn").bind("click touchstart",function(t){(!e(t.target).closest(".more-info-box-js").length||e(t.target).closest(".close-btn").length)&&e(r).remove()})})}),e(".ajaxbtn").click(function(n){n.preventDefault();var i=e(this).attr("data-b"),s=e(this).attr("data-indexb"),o=e(this).attr("data-rt_update"),u=e(this).attr("data-htmlchunk"),a=e('<div id="bowlG"><div id="bowl_ringG"><div class="ball_holderG"><div class="ballG"></div></div></div></div>');e("body").append(a).show();var f=r(u);f.appendTo(e("body")),e.get("",{rt_update:o,datab:i,dataindexb:s}).done(function(n){var r=e("#content1");a.remove(),e(n).appendTo(r),t.setFullName(e("#usernameDisabled, #usernameHidden",r)),f.center().fadeIn("fast"),e(window).resize(function(){f.center()}),e(document,".close-btn").bind("click touchstart",function(t){if(!e(t.target).closest(f).length||e(t.target).closest(".close-btn").length)f.remove(),e(this).unbind(t)})})})}},n});