define(["moment","helpers"],function(e){var t,n=undefined,r=60,i=r*60;return e.fn.fromServerNow=function(){return n!==undefined?this.subtract(n).fromNow():this.fromNow()},t={init:function(){var n=t.getRelativeTimeDict();n.future="ETA: %s",n.past="Overtime: %s",e.lang("progress-bar-en",{relativeTime:n}),n=t.getRelativeTimeDict(),n.future="%s",n.past="Elapsed: %s",e.lang("progress-bar-no-eta-en",{relativeTime:n}),n=t.getRelativeTimeDict(),n.past="%s",n.future="%s",e.lang("waiting-en",{relativeTime:n}),e.lang("en")},setServerTime:function(t){n=e(t).diff(new Date),console.log("Time Offset: {0}".format(n))},getRelativeTimeDict:function(){return{s:"%d seconds",m:t.parseMinutesSeconds,mm:t.parseMinutesSeconds,h:t.parseHoursMinutes,hh:t.parseHoursMinutes,d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"}},parseMinutesSeconds:function(e,t,n,i,s){var o=parseInt(s.seconds),u=o%r;if(o<r)return"{0} seconds".format(u);if(o<r*2)return"1 minute, {0} seconds".format(u);var a=Math.floor(o/r);return"{0} minutes, {1} seconds".format(a,u)},parseHoursMinutes:function(e,t,n,s,o){var u=parseInt(o.seconds),a=Math.floor(u%i/r);if(u<i){var f=Math.floor(u/r),l=u%r;return"{0} minutes, {1} seconds".format(f,l)}if(u<i*2)return"1 hour, {0} minutes".format(a);var c=Math.floor(u/i);return"{0} hours, {1} minutes".format(c,a)},getServerTime:function(n){return n===undefined?e().add(t.getServerOffset()):e(n).add(t.getServerOffset())},getServerOffset:function(){return n},getDateFormatted:function(t){return e.unix(t).format("MMMM DD, H:mm:ss")}},t});