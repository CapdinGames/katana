define(["jquery","realtimePages","helpers","dataTables","mustache","text!templates/buildslaves.mustache"],function(e,t,n,r,i,s){var o,u=undefined;return o={init:function(){u=o.dataTableInit(e(".buildslaves-table"));var n=t.defaultRealtimeFunctions();n.slaves=o.processBuildSlaves,t.initRealtime(n)},processBuildSlaves:function(t){u.fnClearTable();try{e.each(t,function(e,t){var n=[t];u.fnAddData(n)})}catch(n){}},dataTableInit:function(t){var o={};return o.aoColumns=[{mData:null,bSortable:!0},{mData:null,bSortable:!1},{mData:null,bSortable:!0},{mData:null},{mData:null}],o.aoColumnDefs=[{aTargets:[0],sClass:"txt-align-left",mRender:function(e,t,n){return i.render(s,{showFriendlyName:!0,friendly_name:n.friendly_name,host_name:n.name})}},{aTargets:[1],sClass:"txt-align-left",mRender:function(){return i.render(s,{buildersPopup:!0})},fnCreatedCell:function(t,n,r){e(t).find("a.popup-btn-json-js").data({showBuilders:r})}},{aTargets:[2],sClass:"txt-align-left",mRender:function(e,t,n){return n.name!=undefined?n.name:"Not Available"}},{aTargets:[3],mRender:function(t,n,r){var o,u=0;if(r.connected===undefined||r.connected===!1)o="Offline";else if(r.connected===!0&&r.runningBuilds===undefined)o="Idle";else if(r.connected===!0&&r.runningBuilds.length>0){o=r.runningBuilds.length+" build(s) ";var a=!0}return r.runningBuilds!=undefined&&(e.each(r.runningBuilds,function(e,t){t.eta!=undefined&&t.eta<0&&u++}),u=u>0?u:!1),i.render(s,{showStatusTxt:o,showSpinIcon:a,showOvertime:u})},fnCreatedCell:function(t,n,r){r.connected===undefined?e(t).addClass("offline"):r.connected===!0&&r.runningBuilds===undefined?e(t).addClass("idle"):r.connected===!0&&r.runningBuilds.length>0&&e(t).addClass("building").find("a.popup-btn-json-js").data({showRunningBuilds:r})}},{aTargets:[4],mRender:function(e,t,n){var r=n.lastMessage!=undefined?!0:null,o=r?" ("+moment.unix(n.lastMessage).format("MMM Do YYYY, H:mm:ss")+")":"";return i.render(s,{showTimeago:r,showLastMessageDate:o})},fnCreatedCell:function(t,r,i){n.startCounterTimeago(e(t).find(".last-message-timemago"),i.lastMessage)}}],r.initTable(t,o)}},o});