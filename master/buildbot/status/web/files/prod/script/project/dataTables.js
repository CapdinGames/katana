define(["datatables-plugin","helpers","text!templates/buildqueue.html","mustache"],function(e,t,n,r){var i;return i={init:function(){var e=$(".tablesorter-js"),i=[];e.each(function(e){var s=[],o={bPaginate:!1,bLengthChange:!1,bFilter:!1,bSort:!0,bInfo:!1,bAutoWidth:!1,sDom:'<"table-wrapper"t>',bRetrieve:!0,asSorting:!0,bServerSide:!1,bSearchable:!0,aaSorting:[],iDisplayLength:50,bStateSave:!0};$(this).hasClass("input-js")&&(o.bFilter=!0,o.oLanguage={sSearch:""},o.sDom='<"top"flip><"table-wrapper"t><"bottom"pi>'),$("> thead th",this).each(function(e){$(this).hasClass("no-tablesorter-js")?s.push({bSortable:!1}):s.push(null)}),$(this).hasClass("buildqueue-table")?(o.aoColumns=[{mData:"builderName"},{mData:"results"},{mData:"reason"},{mData:"slave"},{mData:"steps",bSortable:!1}],o.aaData=i,o.aoColumnDefs=[{sClass:"txt-align-left",aTargets:[0]},{aTargets:[1],sClass:"txt-align-left",mRender:function(e,t,i){var s=r.render(n,{codebases:!0});return s}},{aTargets:[2],sClass:"txt-align-left",mRender:function(e,t,i){var s=i.reason,o=moment.unix(i.times[0]).fromNow(),u=r.render(n,{reason:s,waitingTime:o});return u}},{aTargets:[3],sClass:"txt-align-right",mRender:function(e,t,i){var s=i.slave.length,o=r.render(n,{slaves:!0,slave:e,slavelength:s});return o}},{aTargets:[4],sClass:"select-input",mRender:function(e,t,i){var s=r.render(n,{input:"true"});return s}}]):o.aoColumns=s,$(this).hasClass("tools-js")&&(o.bPaginate=!0,o.bLengthChange=!0,o.bInfo=!0,o.bFilter=!0,o.oLanguage={sSearch:"",sLengthMenu:'Entries per page<select><option value="10">10</option><option value="25">25</option><option value="50">50</option><option value="100">100</option><option value="-1">All</option></select>'},o.sDom='<"top"flip><"table-wrapper"t><"bottom"pi>');var u=$(this).dataTable(o),a=$(".dataTables_filter input");$("#builders_page").length&&window.location.search!=""&&t.codeBaseBranchOverview(),a.attr("placeholder","Filter results").focus()})}},i});