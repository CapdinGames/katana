define(["jquery","select2"],function(e){var t;return t={getMaxChildWidth:function(t){var n=80;return e(t).each(function(){var t=e(this).width();t>n&&(n=t+30)}),n},comboBox:function(t){var n=e("select.select-tools-js").length;e("option",t).each(function(){e('option[value="'+e(this).val()+'"]',t).length==n&&e(this).clone().prop("selected",!1).appendTo("#commonBranch_select")});var r={};e("#commonBranch_select option").each(function(){var t=e(this).text();r[t]==null?r[t]=!0:e(this).remove()}),e("#commonBranch_select").change(function(){var n=e(this);e("option",t).each(function(){e(this).val()===e(n).val()&&(e(this).parent().children("option").prop("selected",!1),e(this).prop("selected",!0))}),e(t).trigger("change")})},clickSort:function(t){e(".sort-name").click(function(n){var r=e(this);e(r).toggleClass("direction-up"),n.preventDefault(),e(t).children("li").sort(function(t,n){var i=e(t).text().toUpperCase(),s=e(n).text().toUpperCase();return e(r).hasClass("direction-up")?i<s?-1:i>s?1:0:i>s?-1:i<s?1:0}).appendTo(t)})},init:function(){e("select.select-tools-js").select2({width:t.getMaxChildWidth(".select-tools-js")}),e(".show-common").click(function(){var t=e(this).next(".select2-container");e(t).show(0,function(){e(this).select2("open")})}),e("#commonBranch_select").on("select2-close",function(){e(".common-branch-select").hide()}),e("#commonBranch_select").select2({placeholder:"Common branches"}),t.clickSort("#select2-drop .select2-results")}},t});