define(["select2"],function(){var e;return e={init:function(){var t=$(".select-tools-js"),n=$("#commonBranch_select");t.select2({width:e.getMaxChildWidth(t),minimumResultsForSearch:10}),t.add(n).on("select2-open",function(){e.clickSort()}),e.comboBox(t,n),n.select2({width:e.getMaxChildWidth(n),placeholder:"Select a branch"}),n.add(t).on("select2-close",function(e){$(".sort-name").unbind("click"),$(".select2-container").removeClass("select2-container-active")}),t.on("select2-selecting",function(e){n.select2("val","")})},getMaxChildWidth:function(e){var t=80;return e.each(function(){var e=$(this).width();e>t&&(t=e+30)}),t},comboBox:function(e,t){$("option",e).each(function(){$(this).clone().prop("selected",!1).appendTo(t)});var n={};$("option",t).each(function(){var e=$(this).text();n[e]==null?n[e]=!0:$(this).remove()});var r=[];$(e).each(function(e,t){var n=$("option[selected]",t);r.push(n.html().trim())}),t.on("change",function(){var t=$(this);$(e).each(function(e,n){$("option",n).each(function(){return $(this).val()===$(t).val()?($(this).parent().children("option").prop("selected",!1),$(this).prop("selected",!0),!1):!0}),$(n).val()!==t.val()&&$(n).val(r[e])}),e.trigger("change")})},clickSort:function(){var e=$("#select2-drop"),t=e.children(".select2-results"),n=e.children(".sort-name");n.bind("click",function(e){e.preventDefault(),n.toggleClass("direction-up"),t.children("li").sort(function(e,t){var r=$(e).text().toUpperCase(),i=$(t).text().toUpperCase();return n.hasClass("direction-up")?r>i?-1:r<i?1:0:r<i?-1:r>i?1:0}).appendTo(t),t.prop({scrollTop:0})})}},e});