define(["select2"],function(){var e;return e={init:function(){$("select.select-tools-js").select2({width:e.getMaxChildWidth(".select-tools-js"),minimumResultsForSearch:10}),$(".show-common").click(function(){var t=$(this).next(".select2-container");$(t).show(0,function(){$(this).select2("open")}),e.clickSort()}),$("#commonBranch_select").select2({placeholder:"Common branches"}),$("select.select-tools-js").on("select2-open",function(){e.clickSort()}),e.comboBox($(".select-tools-js"))},getMaxChildWidth:function(e){var t=80;return $(e).each(function(){var e=$(this).width();e>t&&(t=e+30)}),t},comboBox:function(e){var t={};$("option",e).each(function(){var e=$(this).text();t[e]==null?t[e]=!0:$(this).clone().prop("selected",!1).appendTo($("#commonBranch_select"))});var n={};$("#commonBranch_select option").each(function(){var e=$(this).text();n[e]==null?n[e]=!0:$(this).remove()}),$("#commonBranch_select").on("change",function(){var t=$(this);$("option",e).each(function(){$(this).val()===$(t).val()&&($(this).parent().children("option").prop("selected",!1),$(this).prop("selected",!0))}),e.trigger("change")}),$("#commonBranch_select").on("select2-close",function(){$(".common-branch-select").hide()})},clickSort:function(){var e=$("#select2-drop"),t=e.children(".sort-name");t.bind("click",function(n){n.preventDefault(),t.toggleClass("direction-up"),$(".select2-results li",e).sort(function(e,n){var r=$(e).text().toUpperCase(),i=$(n).text().toUpperCase();return t.hasClass("direction-up")?r>i?-1:r<i?1:0:r<i?-1:r>i?1:0}).appendTo($(".select2-results",e))})}},e});