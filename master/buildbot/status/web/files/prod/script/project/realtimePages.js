define(["helpers","popup","livestamp"],function(e,t){var n;return n={buildDetail:function(t,n,r){try{var i=JSON.parse(t);$.each(i,function(t,r){var i=r.times[0],s=r.times[1],o=r.text,u=setInterval(function(){e.startTimer($("#elapsedTimeJs"),i)},1e3);s&&(clearInterval(u),window.location.hash||(window.location=window.location+"#finished",window.location.reload()),sock.close());var a=0;$.each(r.steps,function(t,r){var i=r.isStarted,s=r.isFinished===!0,o=i&&!s,u=r.times[0],f=r.times[1],l=e.getResult(r.results[0]),c=r.hidden===!0;if(c!=1){a=++a;if(o){var h=r.logs.length>0,p=r.urls.length>0;if(h){var d="";$(".logs-txt",n).eq(a-1).text("Logs"),$.each(r.logs,function(e,t){var n=t[0],r=t[1];d+='<li class="s-logs-js"><a href='+r+">"+n+"</a></li>"}),$(".log-list-js",n).eq(a-1).html(d)}if(p){var v="";$.each(r.urls,function(t,n){v+='<li class="urls-mod log-list-'+e.getResult(n.results)+'"><a href="'+n.url+'">'+t+"</a></li>"}),$(".log-list-js",n).eq(a-1).append(v)}$(".update-time-js",n).eq(a-1).html("Running"),$(".s-text-js",n).eq(a-1).html(r.text.join(" ")),$(".s-result-js",n).eq(a-1).removeClass().addClass("running result s-result-js"),$(n).eq(a-1).removeClass().addClass("status-running")}else s&&($(".update-time-js",n).eq(a-1).html(e.getTime(u,f)),$(".s-result-js",n).eq(a-1).removeClass().addClass(l+" result s-result-js"),$(n).eq(a-1).removeClass().addClass("finished status-"+l))}})})}catch(s){}},buildersPage:function(n,r){try{var i=JSON.parse(n),s=0,o=i.builders;$.each(o,function(n,r){var i=$('[id="'+r.name+'"]'),o=i.find(".current-cont"),u=i.find(".pending-cont"),a=i.find(".jobs-js"),f=i.find(".last-build-js"),l=i.find(".status-build-js");if(r.pendingBuilds>0){s=++s;var c=$('<a class="more-info popup-btn-js mod-1" data-rt_update="pending" href="#" data-in="">Pending jobs </a>');c.attr("data-in",s-1),u.html(c).children(c).click(function(e){e.preventDefault(),t.pendingJobs(c)})}else u.html("");if(r.currentBuilds.length>0){var h="",p=$('<h2 class="small-head">Current job</h2>');h+='<h2 class="small-head">Current job</h2><ul class="list current-job-js">';var d=$('<ul class="list current-job-js">'),v="";$.each(r.currentBuilds,function(e,t){$.each(t.currentStep,function(e,t){e==="name"&&(v=t)}),h+='<li><a href="'+t.url+'">'+t.number+"</a> "+v+"</li>"}),h+="</ul>",o.html(h)}r.pendingBuilds===0&&r.currentBuilds.length===0&&o.html('<span class="small-txt"> No jobs </span>'),r.latestBuild&&$.each(r.latestBuild,function(t,n){var r=l.find(".build-url-js");if(t==="times"){var i=e.getTime(n[0],n[1]).trim();f.find(".last-run").attr("data-livestamp",n[1]),f.find(".small-txt").html("("+i+")"),f.find(".hidden-date-js").html(n[1])}t==="text"&&l.find(".hide-status-js, .status-text-js").text(n[0]),t==="number"&&r.text("#"+n),t==="url"&&r.attr("href",n)})})}catch(u){}},rtBuildSlaves:function(e){try{}catch(t){}}},n});