define(["jquery","realtimePages","helpers"],function(e,t,n){var r;return r={init:function(){function s(e){sock&&sock.send(e)}function o(e){t.rtBuildqueue(e)}window.sock=null;var r,i=e("body").attr("data-realTimeServer");r=i,console.log(e("body").attr("data-realTimeServer")),"WebSocket"in window?sock=new WebSocket(r):"MozWebSocket"in window?sock=new MozWebSocket(r):(o("Browser does not support WebSocket!"),window.location="http://autobahn.ws/unsupportedbrowser"),sock&&(sock.onopen=function(){e("#bowlG").remove(),console.log(n.getJsonUrl()),s(n.getJsonUrl()),o("Connected to "+r)},sock.onclose=function(e){o("Connection closed (wasClean = "+e.wasClean+", code = "+e.code+", reason = '"+e.reason+"')"),sock=null,console.log("closed")},sock.onmessage=function(e){o(e.data)})}},r});