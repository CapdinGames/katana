define(["jquery","realtimePages","helpers","dataTables","mustache","text!templates/buildqueue.mustache","timeElements"],function(e,t,n,r,i,s,o){var u,a;return a={init:function(){u=a.dataTableInit();var e=t.defaultRealtimeFunctions();e.queue=a.processBuildQueue,t.initRealtime(e),n.selectBuildsAction(u,"","/buildqueue/_selected/cancelselected","cancelselected=")},processBuildQueue:function(e){o.clearTimeObjects(u),u.fnClearTable();try{u.fnAddData(e),o.updateTimeObjects()}catch(t){}},dataTableInit:function(){var t={};return t.aaSorting=[[2,"asc"]],t.aoColumns=[{mData:"builderFriendlyName"},{mData:"sources"},{mData:"reason"},{mData:"slaves"},{mData:"brid"}],t.aoColumnDefs=[{sClass:"txt-align-left",aTargets:[0]},{aTargets:[1],sClass:"txt-align-left",mRender:function(e,t,n){var r=n.sources.length;return i.render(s,{showsources:!0,sources:n.sources,codebase:n.codebase,sourcesLength:r})},fnCreatedCell:function(t,n,r){e(t).find("a.popup-btn-json-js").data({showCodebases:r})}},{aTargets:[2],sClass:"txt-align-left",mRender:function(e,t,n){var r=moment.unix(n.submittedAt).format("MMMM Do YYYY, H:mm:ss");return i.render(s,{reason:n.reason,requested:r,submittedAt:n.submittedAt})},fnCreatedCell:function(t,n,r){o.addElapsedElem(e(t).find(".waiting-time"),r.submittedAt)}},{aTargets:[3],sClass:"txt-align-right",mRender:function(e,t,n){var r=n.slaves.length;return i.render(s,{showslaves:!0,slaves:e,slavelength:r})},fnCreatedCell:function(t,n,r){e(t).find("a.popup-btn-json-js").data({showcompatibleSlaves:r})}},{aTargets:[4],sClass:"select-input",mRender:function(e,t,n){return i.render(s,{input:"true",brid:n.brid})}}],r.initTable(e(".buildqueue-table"),t)}},a});