define(["jquery","realtimePages","helpers","dataTables","mustache","text!templates/buildqueue.mustache","timeElements","popup"],function(e,t,n,r,i,s,o,u){var a,f;return f={init:function(){a=f.dataTableInit();var e=t.defaultRealtimeFunctions();e.queue=f.processBuildQueue,t.initRealtime(e),n.selectBuildsAction(a,"","/buildqueue/_selected/cancelselected","cancelselected=")},processBuildQueue:function(e){o.clearTimeObjects(a),a.fnClearTable();try{a.fnAddData(e),o.updateTimeObjects()}catch(t){}},dataTableInit:function(){var t={};return t.aaSorting=[[2,"asc"]],t.aoColumns=[{mData:"builderFriendlyName"},{mData:"sources"},{mData:"reason"},{mData:"slaves"},{mData:"brid"}],t.aoColumnDefs=[{sClass:"txt-align-left",aTargets:[0]},{aTargets:[1],sClass:"txt-align-left",mRender:function(e,t,n){var r=n.sources.length;return i.render(s,{showsources:!0,sources:n.sources,codebase:n.codebase,sourcesLength:r})},fnCreatedCell:function(t,n,r){var i=e(t).find("a.popup-btn-json-js");u.initJSONPopup(i,{showCodebases:r})}},{aTargets:[2],sClass:"txt-align-left",mRender:function(e,t,n){var r=moment.unix(n.submittedAt).format("MMMM Do YYYY, H:mm:ss");return i.render(s,{reason:n.reason,requested:r,submittedAt:n.submittedAt})},fnCreatedCell:function(t,n,r){o.addElapsedElem(e(t).find(".waiting-time"),r.submittedAt)}},{aTargets:[3],sClass:"txt-align-right",mRender:function(e,t,n){var r=n.slaves.length;return i.render(s,{showslaves:!0,slaves:e,slavelength:r})},fnCreatedCell:function(t,n,r){var i=e(t).find("a.popup-btn-json-js");u.initJSONPopup(i,{showCompatibleSlaves:r})}},{aTargets:[4],sClass:"select-input",mRender:function(e,t,n){return i.render(s,{input:"true",brid:n.brid})}}],r.initTable(e(".buildqueue-table"),t)}},f});