define(["jquery","screensize"],function(n,o){return function(n){n.fn.dropdown=function(o){var e,i=n(this),t=n.extend({},n.fn.dropdown.defaults,o),r=!1;i.settings=t;var d={init:function(){d.setupClick()},setupClick:function(){i.click(function(){void 0===e?d.createHTML()&&(t.onCreate(i,e),d.showDropdown()):r||d.showDropdown()})},createHTML:function(){return void 0===e?(t.beforeCreate(i),e=n("<div/>").addClass("more-info-box").append("<span class='close-btn'></span>").append(t.title).hide(),t.url?(n.ajax(t.url).done(function(n){t.onResponse(i,e,n)||i.append(n),i.append(e),t.onCreate(i,e),d.showDropdown()}),!1):(i.append(e),e.append(n("<div/>").html(t.html)),!0)):!0},showDropdown:function(){if(t.beforeShow(i,e),t.animate!==!1||n.isFunction(t.animate)){var o=function(){d.initCloseButton(),t.onShow(i,e),r=!0};n.isFunction(t.animate)&&t.animate()?e.slideDown(t.showAnimation,o):(e.show(),o())}else r=!0,e.show(),t.onShow(i,e),setTimeout(function(){d.initCloseButton()},50)},hideDropdown:function(){n(document).off("click.dropdown touchstart.dropdown"),n.isFunction(t.animate)&&t.animate()||!n.isFunction(t.animate)&&t.animate?e.slideUp(t.hideAnimation,function(){e.hide(),r=!1,t.onHide(i,e)}):(r=!1,e.hide(),t.onHide(i,e))},initCloseButton:function(){n(document).on("click.dropdown touchstart.dropdown",function(o){(!e.is(o.target)&&0===e.has(o.target).length||e.find(".close-btn").is(o.target))&&(r&&d.hideDropdown(),n(this).unbind(o))})}};return i.showDropdown=function(){d.showDropdown()},i.hideDropdown=function(){d.hideDropdown()},i.options=function(o){t=n.extend({},n.fn.dropdown.defaults,t,o)},i.each(function(){d.init(),t.initalized=!0})},n.fn.dropdown.defaults={title:"<h3>Builders shortcut</h3>",html:void 0,url:void 0,animate:!0,showAnimation:"fast",hideAnimation:"fast",beforeCreate:function(){return void 0},onCreate:function(){return void 0},onResponse:function(){return!1},beforeShow:function(){return void 0},onShow:function(){return void 0},onHide:function(){return void 0}}}(jQuery),{init:function(){var e,i;n("#projectDropdown").dropdown({url:"/projects",beforeCreate:function(){n("#preloader").preloader("showPreloader")},onCreate:function(o){n("#preloader").preloader("hidePreloader"),n(window).on("resize.dropdown",function(){o.hideDropdown()})},onResponse:function(o,t,r){if(void 0===i||void 0===e){i=n(r).find(".tablesorter-js");var d=n(r).find(".scLink");e=n("<ul/>").addClass("submenu list-unstyled"),n(d).each(function(){var o=n(this).attr("data-sc");n(this).attr("href",o);var i=n("<li/>").append(n(this));e.append(i)}),n(i,e).find("a").each(function(){var o=n(this).attr("data-sc");n(this).attr("href",o)})}return!0},beforeShow:function(n,t){o.isMediumScreen()?t.append(i):n.append(e)},onShow:function(n,e){o.isMediumScreen()||e.hide()},onHide:function(n){n.find("ul").remove()},animate:function(){return o.isMediumScreen()}}),n(".smartphone-nav").click(function(){var o=n(".top-menu");o.is(":hidden")?o.addClass("show-topmenu"):o.removeClass("show-topmenu")}),n(window).on("resize.mobile",function(){n(".top-menu").removeClass("show-topmenu")})}}});
//# sourceMappingURL=dropdown.js.map